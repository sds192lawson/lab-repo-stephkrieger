---
title: 'Lab #1: R and Understanding Datasets (30 pts)'
author: "Steph Krieger"
format:
  html:
    embed-resources: true
editor: source
knitr:
  opts_chunk:
    message: false
---
```{r}
library(tidyverse)
library(rscorecard)
sc_key("HgIeThUDFEcfGsF0FzXuHroo3AboBjpgDaRMOXEx") # Replace with your own token!!

scorecard <- sc_init() |>
  sc_year(2022) |>                 #Note how we are looking at only 2024 data here!
  sc_filter(stabbr == "MA") |>     #Note how we are looking at only Massachusetts data here!
  sc_select(unitid, instnm, city, highdeg, control, ugds, adm_rate, costt4_a, costt4_p, pcip27, pctfloan, admcon7, wdraw_orig_yr2_rt, cdr3) |>
  sc_get()
```


## Questions

::: {.callout-important}
###### Question 1 (5 pts)
See if you can identify a unique key for this dataset. Write some lines of code to determine whether the column you've identified can act as unique key for the data. Hint: You need to check whether the values in the column ever repeat.


```{r}
# Write code to calculate number of rows in scorecard
nrow(scorecard)

# Write code to calculate the number of unique values in the column you've identified as a unique key 
scorecard$unitid|> unique() |> length()

# Do these numbers match?
scorecard$unitid|> unique() |> length() == nrow(scorecard)
#TA Feedback: try to answer the questions in the comments!
#TA Feedback: +3 for trying and using nrow
#TA Feedback: +3 for using unique and for using the right key (unitid)
#TQ1 total: 6 points
```

:::

::: {.callout-important}
###### Question 2 (5 pts)
At this point, you've probably figured out that each row in this dataset is a higher education institution. However, there are many different ways that we can define higher education institutions, and that will impact what gets included and excluded in our data. Referencing the Technical Documentation, locate a definition for the unit of observation in this dataset. What institutions are included, and what institutions are excluded? Summarize a definition below.

The definition we found in the Technical Documentation was that Higher Education, in this data set, is post secondary schools receiving federal financial aid dollars and participate in Title IV. However, some schools are included in this data even if they don't participate in Title IV as long as they meet certain criteria. Institutions that are excluded are ones not receiving federal financial aid dollars or don't meet any Title IV criteria.
##TA feeback: great definition, remember to note what data set the technical doucumentation was from. +5
##Q1-Q2 total: 11 points

:::

::: {.callout-important}

###### Question 3 (5 pts)
For each of the variable names in the `scorecard` data frame, look up the associated name in the data dictionary. You will need to search for the variable name in the sixth column of the data dictionary (I recommend using Ctrl-F to quickly locate the variable name in the spreadsheet.) Once you've found the variable name, reference column 1 to determine what this variable means, and reference columns 7 and 8 to see what possible values will appear in that column.

Identify one nominal variable, one ordinal variable, one discrete variable, and one continuous variable in `scorecard` and list their variable names below. Then uncomment the lines below and use the `typeof()` function to see how `R` determined their data types. Did any surprise you?

```{r}
typeof(scorecard$city)
typeof(scorecard$highdeg)
typeof(scorecard$adm_rate)
typeof(scorecard$ugds)
```

city was my Ordinal variable. highdeg was my Nominal variable. adm_rate was my Continuous variable. ugds was my Discreate variable.

##TA Feedback: This looks great just one small note, no need to capitilize the variable names and also discrete is spelled d-i-s-c-r-e-t-e

None of this surprised me.
##TA Feedback: fair enough +5 for Q3
##Total Q1-Q3: 16

:::

::: {.callout-important}
###### Question 4 (5 pts)
Write code below to recode the `admcon7` variable and store the results in a new variable in `scorecard` called `admcon7_text`. You'll need to look up the values in the data dictionary. If you've done this correctly, running this code should produce a barplot that displays multiple bars.

```{r}
#| eval: false
#| code-fold: false
scorecard$admcon7_text <-
  recode(
    scorecard$admcon7,
    "1" = "Required",
    "2" = "Recommended",
    "3" = "Neither required nor recommended",
    "4" = "Do not know",
    "5" = "considered but not required",
    .default = NA_character_
  )

ggplot(scorecard, aes(x = admcon7_text)) +
  geom_bar()
#TA Feedback: This looks great just please save both graphs next time so I can compare them +5
#Total for Q1-Q4: 21
```

:::

::: {.callout-important}

###### Question 5 (5 pts)
In a code chunk below, calculate the number of missing values in both the `costt4_a` and the `costt4_p` columns. Reference the NOTES column in the data dictionary to determine why there are so many `NA` values in these columns. Add a comment to the code chunk below, explaining the reason for missing values in these columns.

```{r}
# Write code here
sum(is.na(scorecard$costt4_a)) + sum(is.na(scorecard$costt4_p)) #code is correct!
# Add comment here
#TA Feedback: Remember comments need to start with a hashtag or R will think they are code
The notes column coment for 'costt4_a' and 'costt4_p' state that these columns represents full-time, first-time, degree/certificate-seeking undergraduates, this means that those who attend half-time or are seeking a second degree are not being included. Which explains the high number of missing values.
#TA Feedback: comment is incorrect: costt4_a is only calculated for academic year institutions, while costt4_p is calculated for program year institutions. -2
#Q5 total: 3
#Q1-Q5 total: 24
```

:::

::: {.callout-important}

###### Question 6 (5 pts)

Referencing the College Scorecard data documentation, see if you can determine which students are included in calculations of earnings and debt. How might the dataâ€™s coverage bias the values that get reported? What might be the social consequences of these biases? Share your ideas on our discussions Slack channel.
##TA Feedback: try to talk a little bit more about what specifically people might think about post-grad earnings, will this graph make them seem too low or too high? which way is it biased? Also say what the social consequences like people thinking schools are worse than they are or other such things are. +2.5
##Q1-Q6 total: 26.5/30 or 88.33%


:::

